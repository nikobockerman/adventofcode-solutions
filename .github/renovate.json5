{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:best-practices",
    ":pinAllExceptPeerDependencies",
    "customManagers:githubActionsVersions",
    "security:minimumReleaseAgeNpm",
  ],

  conan: {
    enabled: true,
  },
  "git-submodules": {
    enabled: true,
  },
  lockFileMaintenance: {
    enabled: true,
  },
  postUpdateOptions: ["npmDedupe"],
  rebaseWhen: "behind-base-branch",
  semanticCommits: "disabled",
  separateMinorPatch: true,

  packageRules: [
    {
      description: "Mise package settings",
      matchPackageNames: ["jdx/mise"],

      automerge: true,
      minimumReleaseAge: "1 day", // 1 day delay to avoid errors installing very fresh version - https://github.com/jdx/mise/issues/2314
    },
    {
      description: "Automerge all updates",
      matchManagers: ["!conan"],
      matchUpdateTypes: [
        "major",
        "minor",
        "patch",
        "digest",
        "lockFileMaintenance",
      ],

      automerge: true,
    },
    {
      description: "Python prebuilt binaries take some time to be available. Delay python updates.",
      matchManagers: ["mise"],
      matchPackageNames: ["python/cpython"],
      minimumReleaseAge: "1 week",
    },
    {
      description: "Don't pin requires-python in pyproject.toml files",
      matchDepTypes: ["requires-python"],
      matchPackageNames: ["python"],
      pin: { enabled: false },
    },
  ],
}
